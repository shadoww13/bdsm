<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <title>Menu</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
</head>
<body>
  <div class="app">

    <!-- Главная -->
    <div class="page" id="homePage">
      <h1 class="app-title">Бегемотиk</h1>

      <div class="menu-buttons">
        <button class="menu-btn primary" id="btn1">Currencies</button>
        <button class="menu-btn primary" id="btn2">Stocks</button>
        <button class="menu-btn primary" id="btn3">Cryptocurrencies</button>
      </div>

      <div class="popular card">
        <h2 class="popular-title">Popular Pairs</h2>
        <ul class="pairs-list" id="pairsList"></ul>
      </div>
    </div>

    <!-- Страница выбора пары (Pair) -->
    <div class="page hidden" id="pairPage">
      <div class="progress">
        <span class="active">1. Pair</span>
        <span>2. Time</span>
        <span>3. Signal</span>
      </div>

      <div class="top-buttons">
        <button class="sub-btn active" id="otcBtn">OTC</button>
        <button class="sub-btn" id="stockBtn">STOCK</button>
      </div>

      <div class="pairs-grid" id="pairGrid"></div>
    </div>

    <!-- Страница выбора времени (Time) -->
    <div class="page hidden" id="timePage">
      <div class="progress">
        <span class="done">1. Pair</span>
        <span class="active">2. Time</span>
        <span>3. Signal</span>
      </div>

      <div class="time-buttons" id="timeButtons">
        <button class="time-btn" data-time="15s">15 sec</button>
        <button class="time-btn" data-time="30s">30 sec</button>
        <button class="time-btn" data-time="1m">1 min</button>
        <button class="time-btn" data-time="5m">5 min</button>
        <button class="time-btn" data-time="15m">15 min</button>
        <button class="time-btn" data-time="60s">60 sec</button>
      </div>

      <div class="recommend">
        Recommended: <b>60 seconds</b> for balanced trading.
      </div>
    </div>

    <!-- Страница сигнала (Signal) -->
    <div class="page hidden" id="signalPage">
      <div class="progress">
        <span class="done">1. Pair</span>
        <span class="done">2. Time</span>
        <span class="active">3. Signal</span>
      </div>

      <div class="signal-area">
        <!-- Loader + steps -->
        <div id="loaderArea" class="loader-area">
          <div class="loader-step" data-step="Connecting">Connecting to TradingView</div>
          <div class="loader-step" data-step="Fetching">Fetching indicators</div>
          <div class="loader-step" data-step="Analyzing">Analyzing</div>
          <div id="spinner" class="spinner" aria-hidden="true"></div>
        </div>

        <!-- Result (hidden until ready) -->
        <div id="signalResult" class="signal-result hidden" aria-live="polite">
          <div class="signal-card">
            <div class="signal-row">
              <div class="signal-label">Pair</div>
              <div class="signal-value" id="resultPair">—</div>
            </div>
            <div class="signal-row">
              <div class="signal-label">Timeframe</div>
              <div class="signal-value" id="resultTime">—</div>
            </div>
            <div class="signal-row action">
              <div class="signal-action" id="resultAction">
                <div class="arrow" id="arrow">▲</div>
                <div class="action-text" id="actionText">BUY</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Unified bottom area: New Signal (shown only on signal page), Back (same place), footer Powered by -->
    <div class="bottom-bar">
      <button id="newSignalBtn" class="new-signal hidden">New Signal</button>
      <button id="globalBack" class="global-back">← Back</button>
      <div class="footer">Powered by <span>StocksLabs</span></div>
    </div>

  </div>

  <audio id="clickSound" src="click-sound.mp3"></audio>
  <script src="script.js"></script>
</body>
</html>
